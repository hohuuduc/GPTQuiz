<header>
  <div class="title-block">
    <h1>B√†i thi K·∫øt th√∫c m√¥n ‚Äì L·∫≠p tr√¨nh Web</h1>
    <p>Th√≠ sinh: Nguy·ªÖn VƒÉn A ¬∑ M√£ SV: 20201234</p>
  </div>
  <div class="floating-timer" id="timer">
    <app-timer [duration]="quiz?.questions?.length ? quiz.questions.length * 60 : 0" (timeUp)="handleTimeUp()"></app-timer>
  </div>
</header>

<div class="layout" *ngIf="quiz">
  <main>
    <div class="exam-header">
      <div class="info">
        <span class="badge">Gi·ªØa k·ª≥</span>
        <span class="badge">H·ªçc ph·∫ßn: Web 1</span>
        <div>M√£ ƒë·ªÅ: 01 ¬∑ H√¨nh th·ª©c: Tr·∫Øc nghi·ªám &amp; T·ª± lu·∫≠n</div>
      </div>
      <div class="info">
        <div>M·ªëc th·ªùi gian:</div>
        <div>B·∫Øt ƒë·∫ßu: {{ startTime | date:'HH:mm' }} ¬∑ K·∫øt th√∫c d·ª± ki·∫øn: {{ endTime | date:'HH:mm' }}</div>
      </div>
    </div>

    <form id="exam-form">
      <section class="question"
               *ngFor="let question of quiz.questions; let i = index"
               [id]="'q' + i"
               [attr.data-question-index]="i"
               data-type="mcq">
        <app-question [question]="question" [questionIndex]="i" (optionSelected)="onOptionSelected($event)"></app-question>
      </section>

      <div class="submit-bar">
        <button type="button" class="btn-outline" id="btn-prev" (click)="prevQuestion()">‚Üê C√¢u tr∆∞·ªõc</button>
        <button type="button" class="btn-outline" id="btn-next" (click)="nextQuestion()">C√¢u ti·∫øp ‚Üí</button>
        <button type="button" class="btn-primary" id="btn-submit-main" (click)="submitQuiz()">
          N·ªôp b√†i
        </button>
      </div>
    </form>
  </main>

  <aside class="sidebar">
    <section>
      <div class="sidebar-section-title">Th√¥ng tin b√†i thi</div>
      <div class="exam-meta">
        <div><span class="label">Th·ªùi l∆∞·ª£ng:</span> {{ quiz.questions?.length }} ph√∫t</div>
        <div><span class="label">S·ªë c√¢u:</span> {{ quiz.questions?.length }} (tr·∫Øc nghi·ªám + t·ª± lu·∫≠n)</div>
        <div><span class="label">Tr·∫°ng th√°i:</span> ƒêang l√†m b√†i</div>
      </div>
    </section>

    <section>
      <div class="sidebar-section-title">Ti·∫øn ƒë·ªô</div>
      <div class="progress">
        <div class="progress-bar" [style.width.%]="progress"></div>
      </div>
      <div class="progress-text">{{ answeredQuestions }} / {{ quiz.questions?.length }} c√¢u ƒë√£ tr·∫£ l·ªùi</div>
    </section>

    <section>
      <div class="sidebar-section-title">Danh s√°ch c√¢u h·ªèi</div>
      <div class="question-nav" id="question-nav">
        <button *ngFor="let question of quiz.questions; let i = index"
                type="button"
                [attr.data-target]="'q' + i"
                [class.active]="i === currentQuestionIndex"
                [class.answered]="isAnswered(i)"
                (click)="scrollToQuestion('q' + i)">
          {{ i + 1 }}
        </button>
      </div>
    </section>

    <div class="actions">
      <button class="btn-outline" type="button" id="btn-save">
        üíæ L∆∞u t·∫°m th·ªùi
      </button>
      <button class="btn-primary" type="button" id="btn-submit-side" (click)="submitQuiz()">
        ‚úÖ N·ªôp b√†i
      </button>
    </div>
  </aside>
</div>
